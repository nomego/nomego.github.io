<link rel="import" href="https://www.polymer-project.org/0.5/components/polymer/polymer.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/core-icon/core-icon.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/core-icons/core-icons.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/core-field/core-field.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/core-input/core-input.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/font-roboto/roboto.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/paper-input/paper-input-decorator.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/paper-input/paper-input.html" />
<link rel="import" href="https://www.polymer-project.org/0.5/components/paper-shadow/paper-shadow.html" />
<link rel="import" href="scaffold-layout.html" />

<template>
	<style>
		core-field {
			position: relative;
		}
		.card {
			display: inline-block;
			background: white;
			box-sizing: border-box;
			width: 450px;
			min-width: 40%;
			max-width: 95%;
			margin: 16px;
			padding: 16px;
			border-radius: 3px;
		}
		label.after {
			position: absolute;
			color: #888;
			right: 0;
			top: 17px;
		}
		p.info {
			color: #888;
			font-size: 0.8em;
			font-style: italic;
		}
		.card :first-child {
			margin-top: 0;
		}
		.card :last-child {
			margin-bottom: 0;
		}
	</style>
	<scaffold-layout selected="elbil">
		<div class="title">Elbil vs bensin- / dieselbil</div>
		<template id="t" is="auto-binding">

			<h2>Allmänt</h2>

			<div layout horizontal center center-justified flex wrap>
				<paper-shadow auto-vertical class="card" z="2">
					<h3>Valuta</h3>

					<core-field>
						<label flex>Valuta</label>
						<paper-input value="{{ currency }}"></paper-input>
					</core-field>

					<core-field>
						<label flex>Enhet</label>
						<paper-input value="{{ moneyUnit }}"></paper-input>
					</core-field>
				</paper-shadow>
			</div>

			<h2>Elbil</h2>

			<div layout horizontal center center-justified flex wrap>

				<paper-shadow auto-vertical class="card" z="2">

					<h3>Laddningskapacitet</h3>

					<core-field>
						<label flex>Spänning</label>
						<paper-input value="{{ volt }}"></paper-input>
						<label class="after">volt</label>
					</core-field>

					<core-field>
						<label flex>Strömstyrka</label>
						<paper-input type="number" value="{{ ampere }}"></paper-input>
						<label class="after">ampere</label>
					</core-field>

					<p class="info">Normal säkring hemma är 10 ampere.<br/>Max belastning på säkringen är {{ volt * ampere }} watt (W) eller {{ volt * ampere / 1000 }} kilowatt (kW).<br/>Max förbrukning under en timme blir alltså {{ volt * ampere }} Wh eller {{ volt * ampere / 1000 }} kWh.</p>
				</paper-shadow>


				<paper-shadow auto-vertical class="card" z="2">

					<h3>Laddningstid</h3>

					<core-field>
						<label flex>Laddningstid</label>
						<paper-input type="number" value="{{ chargingTime }}"></paper-input>
						<label class="after">timmar</label>
					</core-field>

					<p class="info">Tid innan batteriet är fulladdat, förbrukning för en full laddning är max {{ volt * ampere * chargingTime / 1000 }} kWh.</p>
				</paper-shadow>

				<paper-shadow auto-vertical class="card" z="2">
					<h3>Elpris</h3>

					<core-field>
						<label flex>Pris per kWh</label>
						<paper-input type="number" value="{{ kwhPrice }}"></paper-input>
						<label class="after">{{ moneyUnit }} {{ currency }}</label>
					</core-field>

					<p class="info">
						Detta ska inbegripa samtliga kostnader för dig som konsument.<br/>
						Mars 2015 låg ett bra avtal på ca 75 öre / kWh allt inkluderat.<br/>
						Kostnad för en full laddning är max {{ volt * ampere * chargingTime / 1000 * kwhPrice | toFixed(2) }}{{ moneyUnit }} {{ currency }}.
					</p>
				</paper-shadow>

				<paper-shadow auto-vertical class="card" z="2">
					<h3>Räckvidd</h3>

					<core-field>
						<label flex>Räckvidd</label>
						<paper-input type="number" value="{{ evDistance }}"></paper-input>
						<label class="after">kilometer</label>
					</core-field>

					<p class="info">
						Kostnaden per mil blir {{ volt * ampere * chargingTime / 100 * kwhPrice / evDistance | toFixed(2) }}{{ moneyUnit }} {{ currency }}.
					</p>
				</paper-shadow>
			</div>

			<h2>Bensin- / dieselbil</h2>

			<div layout horizontal center center-justified flex wrap>

				<paper-shadow auto-vertical class="card" z="2">

					<h3>Kostnad / förbrukning</h3>

					<core-field>
						<label flex>Bensinkostnad per liter</label>
						<paper-input type="number" value="{{ literFuelCharge }}"></paper-input>
						<label class="after">{{ moneyUnit }} {{ currency }}</label>
					</core-field>
					<core-field>
						<label flex>Förbrukning per mil</label>
						<paper-input type="number" value="{{ fuelBurn }}"></paper-input>
						<label class="after">liter</label>
					</core-field>

					<p class="info">
						Kostnaden per mil blir {{ literFuelCharge * fuelBurn | toFixed(2) }}{{ moneyUnit }} {{ currency }}.
					</p>
				</paper-shadow>
			</div>

			<h2>Resultat</h2>

			<div layout horizontal center center-justified flex wrap>
				<paper-shadow auto-vertical class="card" z="2">

					<h3>El kostar {{ (volt * ampere * chargingTime * kwhPrice / evDistance) / (literFuelCharge * fuelBurn) | toFixed(2) }}% av vad bensin/diesel kostar!<br/>För samma pris som du kan åka {{ 100 / ((volt * ampere * chargingTime * kwhPrice / evDistance) / (literFuelCharge * fuelBurn)) | toFixed(2) }} gånger längre på el!</h3>
				</paper-shadow>
			</div>
		</template>
	</scaffold-layout>
<script>
/*global document */
var t = document.getElementById('t');
t.toFixed = function (val, fixval) {
	return val.toFixed(fixval);
};
t.currency = 'SEK';
t.moneyUnit = 'kr';
t.ampere = 10;
t.volt = 230;
t.kwhPrice = 0.80;
t.chargingTime = 5;
t.evDistance = 50;
t.literFuelCharge = 13.5;
t.fuelBurn = 0.7;
</script>
</template>